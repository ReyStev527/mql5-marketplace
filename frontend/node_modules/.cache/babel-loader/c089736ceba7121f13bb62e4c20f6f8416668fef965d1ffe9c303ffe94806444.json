{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import{Container,Typography,Box,Card,CardContent,Button,TextField,Grid,CircularProgress,Alert,Divider}from'@mui/material';import{ShoppingCart,CreditCard}from'@mui/icons-material';import{Helmet}from'react-helmet-async';import{paymentAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PaymentCheckout=()=>{const location=useLocation();const navigate=useNavigate();const[loading,setLoading]=useState(false);const[error,setError]=useState('');// Get product data from location state\nconst{product}=location.state||{};const[customerData,setCustomerData]=useState({name:'',email:'',phone:''});useEffect(()=>{if(!product){navigate('/products');}},[product,navigate]);const handleInputChange=(field,value)=>{setCustomerData(prev=>({...prev,[field]:value}));};const handlePayment=async()=>{try{setLoading(true);setError('');const paymentData={product_id:product.id,customer_name:customerData.name,customer_email:customerData.email,customer_phone:customerData.phone};await paymentAPI.createPayment(paymentData);}catch(err){setError(err.message||'Payment failed. Please try again.');}finally{setLoading(false);}};if(!product){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"Product not found. Redirecting...\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[\"Checkout - \",product.name,\" - MQL5 Marketplace\"]})}),/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",sx:{py:4},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h3\",gutterBottom:true,sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(ShoppingCart,{sx:{mr:2}}),\"Checkout\"]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{size:{xs:12,md:6},children:/*#__PURE__*/_jsx(Card,{elevation:0,sx:{border:1,borderColor:'grey.200'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Order Summary\"}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:600,children:product.name}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:1},children:product.description}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"primary\",children:[\"$\",product.price]})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Total:\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"primary\",children:[\"$\",product.price]})]})]})})}),/*#__PURE__*/_jsx(Grid,{size:{xs:12,md:6},children:/*#__PURE__*/_jsx(Card,{elevation:0,sx:{border:1,borderColor:'grey.200'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Customer Information\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{size:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Full Name\",value:customerData.name,onChange:e=>handleInputChange('name',e.target.value),required:true})}),/*#__PURE__*/_jsx(Grid,{size:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",type:\"email\",value:customerData.email,onChange:e=>handleInputChange('email',e.target.value),required:true})}),/*#__PURE__*/_jsx(Grid,{size:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Phone Number\",value:customerData.phone,onChange:e=>handleInputChange('phone',e.target.value),required:true})}),/*#__PURE__*/_jsx(Grid,{size:12,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",size:\"large\",startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(CreditCard,{}),onClick:handlePayment,disabled:loading||!customerData.name||!customerData.email,sx:{mt:2},children:loading?'Processing...':'Proceed to Payment'})})]})]})})})]})]})]});};export default PaymentCheckout;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","Container","Typography","Box","Card","CardContent","Button","TextField","Grid","CircularProgress","Alert","Divider","ShoppingCart","CreditCard","Helmet","paymentAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PaymentCheckout","location","navigate","loading","setLoading","error","setError","product","state","customerData","setCustomerData","name","email","phone","handleInputChange","field","value","prev","handlePayment","paymentData","product_id","id","customer_name","customer_email","customer_phone","createPayment","err","message","children","severity","maxWidth","sx","py","variant","gutterBottom","display","alignItems","mr","container","spacing","size","xs","md","elevation","border","borderColor","mb","fontWeight","color","description","price","my","justifyContent","fullWidth","label","onChange","e","target","required","type","startIcon","onClick","disabled","mt"],"sources":["/workspaces/mql5-marketplace/frontend/src/pages/PaymentCheckout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Typography,\n  Box,\n  Card,\n  CardContent,\n  Button,\n  TextField,\n  Grid,\n  CircularProgress,\n  Alert,\n  Divider,\n} from '@mui/material';\nimport { ShoppingCart, CreditCard } from '@mui/icons-material';\nimport { Helmet } from 'react-helmet-async';\nimport { paymentAPI } from '../services/api';\n\nconst PaymentCheckout = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  \n  // Get product data from location state\n  const { product } = location.state || {};\n  \n  const [customerData, setCustomerData] = useState({\n    name: '',\n    email: '',\n    phone: '',\n  });\n\n  useEffect(() => {\n    if (!product) {\n      navigate('/products');\n    }\n  }, [product, navigate]);\n\n  const handleInputChange = (field, value) => {\n    setCustomerData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const handlePayment = async () => {\n    try {\n      setLoading(true);\n      setError('');\n\n      const paymentData = {\n        product_id: product.id,\n        customer_name: customerData.name,\n        customer_email: customerData.email,\n        customer_phone: customerData.phone,\n      };\n\n      await paymentAPI.createPayment(paymentData);\n      \n    } catch (err) {\n      setError(err.message || 'Payment failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!product) {\n    return (\n      <Container>\n        <Alert severity=\"error\">Product not found. Redirecting...</Alert>\n      </Container>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Checkout - {product.name} - MQL5 Marketplace</title>\n      </Helmet>\n      <Container maxWidth=\"md\" sx={{ py: 4 }}>\n        <Typography variant=\"h3\" gutterBottom sx={{ display: 'flex', alignItems: 'center' }}>\n          <ShoppingCart sx={{ mr: 2 }} />\n          Checkout\n        </Typography>\n\n        <Grid container spacing={4}>\n          {/* Order Summary */}\n          <Grid size={{ xs: 12, md: 6 }}>\n            <Card elevation={0} sx={{ border: 1, borderColor: 'grey.200' }}>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  Order Summary\n                </Typography>\n                <Box sx={{ mb: 2 }}>\n                  <Typography variant=\"subtitle1\" fontWeight={600}>\n                    {product.name}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n                    {product.description}\n                  </Typography>\n                  <Typography variant=\"h6\" color=\"primary\">\n                    ${product.price}\n                  </Typography>\n                </Box>\n                <Divider sx={{ my: 2 }} />\n                <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n                  <Typography variant=\"h6\">Total:</Typography>\n                  <Typography variant=\"h6\" color=\"primary\">\n                    ${product.price}\n                  </Typography>\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          {/* Customer Information */}\n          <Grid size={{ xs: 12, md: 6 }}>\n            <Card elevation={0} sx={{ border: 1, borderColor: 'grey.200' }}>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  Customer Information\n                </Typography>\n                \n                {error && (\n                  <Alert severity=\"error\" sx={{ mb: 2 }}>\n                    {error}\n                  </Alert>\n                )}\n\n                <Grid container spacing={2}>\n                  <Grid size={12}>\n                    <TextField\n                      fullWidth\n                      label=\"Full Name\"\n                      value={customerData.name}\n                      onChange={(e) => handleInputChange('name', e.target.value)}\n                      required\n                    />\n                  </Grid>\n                  <Grid size={12}>\n                    <TextField\n                      fullWidth\n                      label=\"Email\"\n                      type=\"email\"\n                      value={customerData.email}\n                      onChange={(e) => handleInputChange('email', e.target.value)}\n                      required\n                    />\n                  </Grid>\n                  <Grid size={12}>\n                    <TextField\n                      fullWidth\n                      label=\"Phone Number\"\n                      value={customerData.phone}\n                      onChange={(e) => handleInputChange('phone', e.target.value)}\n                      required\n                    />\n                  </Grid>\n                  <Grid size={12}>\n                    <Button\n                      fullWidth\n                      variant=\"contained\"\n                      size=\"large\"\n                      startIcon={loading ? <CircularProgress size={20} /> : <CreditCard />}\n                      onClick={handlePayment}\n                      disabled={loading || !customerData.name || !customerData.email}\n                      sx={{ mt: 2 }}\n                    >\n                      {loading ? 'Processing...' : 'Proceed to Payment'}\n                    </Button>\n                  </Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n      </Container>\n    </>\n  );\n};\n\nexport default PaymentCheckout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}